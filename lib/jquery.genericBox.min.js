/*
 * Generic - jQuery Plugin
 *
 * Example and documentation at: http://danlevan.github.io/jquery.generic
 *
 * Copyright (c) 2014 Dan LE VAN
 *
 * Version: 0.1.0 (Sat Oct 25 2014)
 * Requires: jQuery v1.7+
 * * Licensed under the MIT license:
 *   https://raw.github.com/danlevan/jquery.generic/master/LICENSE
 */

!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(b,c){var d=this;d.el=b,d.$el=a(b),d.isVisible=!1,d.options=a.extend(!0,{},a.fn.gb.defaults,c),i(),j(),k(),g("initialize"),o()}function c(a,b){that.$container.on(a,b)}function d(a,b){that.$container.one(a,b)}function e(a,b){that.$container.off(a,b)}function f(b,c,d){a(b).on(c,d);var e=a._data(b,"events")[c.split(".")[0]],f=e.pop();e.splice(0,0,f)}function g(){that.$container.trigger.apply(that.$container,arguments)}function h(a){var b=jQuery.Event(a);return b.isActionPrevented=!1,b.preventAction=function(){this.isActionPrevented=!0},g(b),!b.isActionPrevented}function i(){that.$el.css({display:"block","pointer-events":"auto"}),that.$el.wrap('<div class="'+that.options.css.box+'">'),that.$wrapper=that.$el.parent().css({"pointer-events":"none"}),that.$container=that.$wrapper.wrap('<div class="'+that.options.css.wrap+'">').parent(),that.$overlay=a("<div>").addClass(that.options.css.overlay).insertBefore(that.$wrapper),that.$close=a('<div class="'+that.options.css.close+'">').css({"pointer-events":"auto"}).on("click",function(){that.hide()}).prependTo(that.$wrapper)}function j(){that.options.lockBackgroundScroll&&(that.$overlay.on("DOMMouseScroll mousewheel.gb",m),that.$close.on("DOMMouseScroll mousewheel.gb",m),that.$el.on("DOMMouseScroll mousewheel.gb",n))}function k(){a.each(that.options,function(a,b){if(0===a.indexOf("on")){var d=a.substring(2);d=d[0].toLowerCase()+d.slice(1),c(d,b)}}),that.$wrapper.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(){g("animationStart"),g(that.isVisible?"showAnimationStart":"hideAnimationStart")}),that.$wrapper.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){g("animationEnd"),g(that.isVisible?"showAnimationEnd":"hideAnimationEnd")})}function l(a){switch(a.keyCode){case that.options.hideKey:that.hide();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}function m(a){return a.stopPropagation(),a.preventDefault(),a.returnValue=!1,!1}function n(b){var c=a(this),d=this.scrollTop,e=this.scrollHeight,f=c.height(),g=b.originalEvent.wheelDelta,h=parseInt(c.css("paddingTop"))||0,i=parseInt(c.css("paddingTop"))||0,j=g>0;return!j&&-g>e-f-d-h-i?(c.scrollTop(e),m(b)):j&&g>d?(c.scrollTop(0),m(b)):void 0}function o(){try{{window.getComputedStyle(that.$container[0]).visibility}}catch(a){}}a.fn.gb=function(c){var d="_gb",e=this.map(function(){var e=a(this),f=e.data(d);if(f)return f;var g=e.data("gb");return"string"==typeof g&&(console.warn("The data-options provided is not a valid JSON: "+g),g={}),f=new b(e[0],a.extend(!0,{},g?g:{},c?c:{})),e.data(d,f),f});return 1===e.length?e[0]:e},a.fn.gb.defaults={css:{wrap:"gb",close:"gbClose",box:"gbBox",overlay:"gbOverlay",visible:"visible"},hideOnClickOverlay:!0,hideKey:27,blurTrigger:!0,lockBackgroundScroll:!0,onInitialize:null,onShowStart:null,onShow:null,onHideStart:null,onHide:null,onAnimationStart:null,onAnimationEnd:null,onShowAnimationStart:null,onShowAnimationEnd:null,onHideAnimationStart:null,onHideAnimationEnd:null,onKey:null},b.prototype={show:function(){return!that.isVisible&&h("showStart")?(that.$container.addClass(that.options.css.visible),that.options.hideKey&&f(window,"keydown.gb",l),that.options.hideOnClickOverlay&&that.$overlay.on("click.gb",function(){that.hide()}),that.options.blurTrigger&&a(":focus").blur(),g("show"),that.isVisible=!0,that):void 0},hide:function(){return that.isVisible&&h("hideStart")?(that.options.hideKey&&a(window).off("keydown.gb",l),that.options.hideOnClickOverlay&&that.$overlay.off("click.gb"),that.$container.removeClass(that.options.css.visible),g("hide"),that.isVisible=!1,that):void 0},on:function(a,b){return c(a,b),that},one:function(a,b){return d(a,b),that},off:function(a,b){return e(a,b),that},destroy:function(){that.$container.remove()}}});
//# sourceMappingURL=jquery.genericBox.min.js.map